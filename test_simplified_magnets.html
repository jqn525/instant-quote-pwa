<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Simplified Magnets</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        .success { border-color: green; background-color: #f0f8f0; }
        .error { border-color: red; background-color: #f8f0f0; }
        .warning { border-color: orange; background-color: #fff8f0; }
        #product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        .product-card { padding: 15px; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; text-align: center; transition: all 0.2s; }
        .product-card:hover { border-color: #2563eb; transform: translateY(-2px); }
        .product-card.magnets { background-color: #ffe6cc; }
        .product-icon { margin-bottom: 10px; }
        .product-name { margin: 10px 0 5px 0; font-weight: bold; }
        .product-description { color: #666; font-size: 0.9em; }
    </style>
</head>
<body>
    <h1>ðŸ§² Test: Simplified Magnets Definition</h1>
    
    <div id="status" class="test-result">Testing...</div>
    
    <h3>Step 1: Test with Simplified Magnets (Standard Pricing)</h3>
    <div id="simple-test"></div>
    
    <h3>Step 2: Test with Original Complex Magnets (Interpolation)</h3>
    <div id="complex-test"></div>

    <script type=\"module\">
        // Test 1: Create simplified magnets definition
        const simplifiedProducts = {
            brochures: {
                key: 'brochures',
                name: 'Brochures',
                description: 'Tri-fold and bi-fold brochures',
                pricing: { setupFee: 30.00, overhead: { k: 1.50, e: 0.75 }, variableCost: null },
                sizes: { small: { name: '8.5" x 11"', imposition: 2 } },
                finishingOptions: []
            },
            magnets_simple: {
                key: 'magnets_simple',
                name: 'Magnets (Simple)',
                description: 'Custom printed magnets - simplified',
                pricing: { setupFee: 50.00, overhead: { k: 2.00, e: 0.75 }, variableCost: null },
                sizes: { small: { name: '2" x 2"', imposition: 8 } },
                finishingOptions: []
            }
        };

        try {
            // Import the SVG icon function
            const { createSvgIcon } = await import('./src/components/SvgIcons.js');
            
            document.getElementById('status').innerHTML = '<div class="test-result success">âœ“ SvgIcons imported successfully</div>';
            
            // Test 1: Render simplified products
            const simpleContainer = document.createElement('div');
            simpleContainer.id = 'simple-products';
            simpleContainer.style.display = 'grid';
            simpleContainer.style.gridTemplateColumns = 'repeat(auto-fit, minmax(200px, 1fr))';
            simpleContainer.style.gap = '15px';
            
            Object.entries(simplifiedProducts).forEach(([key, product]) => {
                const card = document.createElement('div');
                card.className = 'product-card';
                if (key.includes('magnets')) card.classList.add('magnets');
                
                let icon = '';
                try {
                    if (key.includes('magnets')) {
                        icon = createSvgIcon('magnet');
                    } else {
                        icon = createSvgIcon('brochure');
                    }
                } catch (e) {
                    icon = `<span style="color: red;">Icon Error: ${e.message}</span>`;
                }
                
                card.innerHTML = `
                    <div class="product-icon">${icon}</div>
                    <div class="product-name">${product.name}</div>
                    <div class="product-description">${product.description}</div>
                    <small>Setup: $${product.pricing.setupFee}</small>
                `;
                
                simpleContainer.appendChild(card);
            });
            
            document.getElementById('simple-test').appendChild(simpleContainer);
            
            // Test 2: Try to import and render original products
            try {
                const { productTypes } = await import('./src/data/products.js?v=' + Date.now());
                
                const complexContainer = document.createElement('div');
                complexContainer.id = 'complex-products';
                complexContainer.style.display = 'grid';
                complexContainer.style.gridTemplateColumns = 'repeat(auto-fit, minmax(200px, 1fr))';
                complexContainer.style.gap = '15px';
                
                let renderedCount = 0;
                let magnetFound = false;
                
                Object.entries(productTypes).forEach(([key, product]) => {
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    if (key === 'magnets') {
                        card.classList.add('magnets');
                        magnetFound = true;
                    }
                    
                    let icon = '';
                    try {
                        switch (key) {
                            case 'magnets': icon = createSvgIcon('magnet'); break;
                            case 'brochures': icon = createSvgIcon('brochure'); break;
                            case 'postcards': icon = createSvgIcon('postcard'); break;
                            case 'flyers': icon = createSvgIcon('flyer'); break;
                            case 'bookmarks': icon = createSvgIcon('bookmark'); break;
                            case 'table_tents': icon = createSvgIcon('table_tent'); break;
                            default: icon = createSvgIcon('businessCard');
                        }
                    } catch (e) {
                        icon = `<span style="color: red;">Icon Error: ${e.message}</span>`;
                    }
                    
                    card.innerHTML = `
                        <div class="product-icon">${icon}</div>
                        <div class="product-name">${product.name}</div>
                        <div class="product-description">${product.description}</div>
                        <small>Type: ${product.pricing.type || 'standard'}</small>
                    `;
                    
                    complexContainer.appendChild(card);
                    renderedCount++;
                });
                
                const statusDiv = document.createElement('div');
                statusDiv.className = `test-result ${magnetFound ? 'success' : 'error'}`;
                statusDiv.innerHTML = `
                    <strong>Original Products Test:</strong><br>
                    Products rendered: ${renderedCount}<br>
                    Magnets found in data: ${productTypes.magnets ? 'YES' : 'NO'}<br>
                    Magnets rendered: ${magnetFound ? 'YES' : 'NO'}<br>
                    ${productTypes.magnets ? `Magnets pricing type: ${productTypes.magnets.pricing.type}` : ''}
                `;
                
                document.getElementById('complex-test').appendChild(statusDiv);
                document.getElementById('complex-test').appendChild(complexContainer);
                
            } catch (error) {
                document.getElementById('complex-test').innerHTML = `
                    <div class="test-result error">
                        <strong>Error loading original products:</strong> ${error.message}<br>
                        <pre>${error.stack}</pre>
                    </div>
                `;
            }
            
        } catch (error) {
            document.getElementById('status').innerHTML = `
                <div class="test-result error">
                    <strong>Test failed:</strong> ${error.message}<br>
                    <pre>${error.stack}</pre>
                </div>
            `;
        }
    </script>
</body>
</html>